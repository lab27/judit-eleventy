<!doctype html>
<html {% if section %} data-current="{{ section }}"{% endif %} lang="de">

	{% include "components/head.njk" %}

	<body>

		<header>
			<em>
				<a href="{{ '/' | url }}">{{ metadata.title }}</a><br/>
        <span>{{ metadata.subtitle }}</span>
			</em>
			{% include "components/nav.njk" %}
		</header>
    <div class="flyer transition-fly"></div>
		<main id="swup" class="transition-fade">
			{{ layoutContent | safe }}
		</main>

		{% include "components/footer.njk" %}
    <script src="{{ '/' | url }}static/js/swup.min.js"></script>
    <script>
    const swup = new Swup(); 
		let globalPath = '/';
		let $navItem;
		swup.on('contentReplaced', function () {
			console.log('contentReplaced!', window.location.pathname)
			if (window.location.pathname === globalPath) {
				$navItem.classList.toggle('active')
			}
		});
		swup.on('clickLink', function (e) {
			$navItem = e.target;
			globalPath = e.target.attributes.href.nodeValue;
		});
    </script>
	</body>

</html>
